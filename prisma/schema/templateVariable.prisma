enum TemplateVariableType {
    TEXT
    NUMBER
    DATE
    SELECT
}

model TemplateVariableBase {
    recipientGroupItemValues RecipientGroupItemVariableValue[]
    id                       Int                                @id @default(autoincrement())
    templateId               Int
    name                     String                             @db.VarChar(255)
    description              String?
    type                     TemplateVariableType
    required                 Boolean                            @default(false)
    order                    Int
    createdAt                DateTime
    updatedAt                DateTime
    template                 Template                          @relation("TemplateToVariable", fields: [templateId], references: [id])
    TextTemplateVariable     TextTemplateVariable?
    NumberTemplateVariable   NumberTemplateVariable?
    DateTemplateVariable     DateTemplateVariable?
    SelectTemplateVariable   SelectTemplateVariable?

    @@unique([templateId, name])
}

model TextTemplateVariable {
    id           Int                  @id
    minLength    Int?
    maxLength    Int?
    pattern      String?              @db.VarChar(255)
    previewValue String?              @db.VarChar(255)
    base         TemplateVariableBase @relation(fields: [id], references: [id])
}

model NumberTemplateVariable {
    id            Int                  @id
    minValue      Decimal?
    maxValue      Decimal?
    decimalPlaces Int?
    previewValue  Decimal?
    base          TemplateVariableBase @relation(fields: [id], references: [id])
}

model DateTemplateVariable {
    id           Int                  @id
    minDate      DateTime?
    maxDate      DateTime?
    format       String?              @db.VarChar(50)
    previewValue DateTime?
    base         TemplateVariableBase @relation(fields: [id], references: [id])
}

model SelectTemplateVariable {
    id           Int                  @id
    options      Json? // JSON array
    multiple     Boolean?
    previewValue String?              @db.VarChar(255)
    base         TemplateVariableBase @relation(fields: [id], references: [id])
}
