type TemplateCategory {
  id: ID!
  name: String! @rules(apply: ["required", "string", "min:3", "max:255"])
  description: String
  parentCategory: TemplateCategory @belongsTo
  childCategories: [TemplateCategory!]! @hasMany @orderBy(column: "order")
  order: Int!
  specialType: TemplateCategoryType
  created_at: DateTime!
  updated_at: DateTime!
  deleted_at: DateTime
}

enum TemplateCategoryType {
  DELETED
  MAIN
  NONE
}

input CreateTemplateCategoryInput {
  name: String! @rules(apply: ["required", "string", "min:3", "max:255"])
  description: String
  parentCategoryId: ID @rules(apply: [
    "exists:template_categories,id",
    "not_deletion_category",
    "prevent_self_parent",
    "prevent_circular_reference"
  ])
  order: Int @rules(apply: ["integer", "min:0"])
}

input UpdateTemplateCategoryInput {
  name: String @rules(apply: ["string", "min:3", "max:255"])
  description: String
  parentCategoryId: ID @rules(apply: [
    "exists:template_categories,id",
    "not_deletion_category",
    "prevent_self_parent",
    "prevent_circular_reference"
  ])
  order: Int @rules(apply: ["integer", "min:0"])
}

input ReorderCategoriesInput {
  id: ID!
  order: Int!
}
