"""This directive allows results to be deferred during execution"""
directive @defer(
  """Deferred behaviour is controlled by this argument"""
  if: Boolean! = true

  """A unique label that represents the fragment being deferred"""
  label: String
) on FRAGMENT_SPREAD | INLINE_FRAGMENT

"""
This directive disables error propagation when a non nullable field returns null for the given operation.
"""
directive @experimental_disableErrorPropagation on MUTATION | QUERY | SUBSCRIPTION

type AuthPayload {
  token: String!
  user: User!
}

enum CategorySpecialType {
  Main
  Suspension
}

enum CountryCode {
  AD
  AE
  AF
  AG
  AI
  AL
  AM
  AO
  AQ
  AR
  AS
  AT
  AU
  AW
  AX
  AZ
  BA
  BB
  BD
  BE
  BF
  BG
  BH
  BI
  BJ
  BL
  BM
  BN
  BO
  BR
  BS
  BT
  BV
  BW
  BY
  BZ
  CA
  CC
  CD
  CF
  CG
  CH
  CI
  CK
  CL
  CM
  CN
  CO
  CR
  CU
  CV
  CW
  CX
  CY
  CZ
  DE
  DJ
  DK
  DM
  DO
  DZ
  EC
  EE
  EG
  EH
  ER
  ES
  ET
  FI
  FJ
  FK
  FM
  FO
  FR
  GA
  GB
  GD
  GE
  GF
  GG
  GH
  GI
  GL
  GM
  GN
  GP
  GQ
  GR
  GS
  GT
  GU
  GW
  GY
  HK
  HM
  HN
  HR
  HT
  HU
  ID
  IE
  IM
  IN
  IO
  IQ
  IR
  IS
  IT
  JE
  JM
  JO
  JP
  KE
  KG
  KH
  KI
  KM
  KN
  KP
  KR
  KW
  KY
  KZ
  LA
  LB
  LC
  LI
  LK
  LR
  LS
  LT
  LU
  LV
  LY
  MA
  MC
  MD
  ME
  MF
  MG
  MH
  MK
  ML
  MM
  MN
  MO
  MP
  MQ
  MR
  MS
  MT
  MU
  MV
  MW
  MX
  MY
  MZ
  NA
  NC
  NE
  NF
  NG
  NI
  NL
  NO
  NP
  NR
  NU
  NZ
  OM
  PA
  PE
  PF
  PG
  PH
  PK
  PL
  PM
  PN
  PR
  PS
  PT
  PW
  PY
  QA
  RE
  RO
  RS
  RU
  RW
  SA
  SB
  SC
  SD
  SE
  SG
  SH
  SI
  SJ
  SK
  SL
  SM
  SN
  SO
  SR
  SS
  ST
  SV
  SX
  SY
  SZ
  TC
  TD
  TF
  TG
  TH
  TJ
  TK
  TL
  TM
  TN
  TO
  TR
  TV
  TW
  TZ
  UA
  UG
  US
  UY
  UZ
  VA
  VC
  VE
  VG
  VI
  VN
  VU
  WF
  WS
  XK
  YE
  YT
  ZA
  ZM
  ZW
}

input CreateDateTemplateVariableInput {
  description: String
  format: String
  maxDate: LocalDate
  minDate: LocalDate
  name: String!
  previewValue: LocalDate
  required: Boolean!
  templateId: Int!
}

input CreateNumberTemplateVariableInput {
  decimalPlaces: Int
  description: String
  maxValue: Float
  minValue: Float
  name: String!
  previewValue: Float
  required: Boolean!
  templateId: Int!
}

input CreateSelectTemplateVariableInput {
  description: String
  multiple: Boolean!
  name: String!
  options: [String!]!
  previewValue: String
  required: Boolean!
  templateId: Int!
}

input CreateStudentInput {
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  name: String!
  nationality: CountryCode
  phoneNumber: PhoneNumber
}

input CreateTemplateCategoryInput {
  description: String
  name: String!
  parentCategoryId: Int
}

input CreateTemplateInput {
  categoryId: Int!
  description: String
  name: String!
}

input CreateTextTemplateVariableInput {
  description: String
  maxLength: Int
  minLength: Int
  name: String!
  pattern: String
  previewValue: String
  required: Boolean!
  templateId: Int!
}

type DateTemplateVariable implements TemplateVariable {
  createdAt: LocalDateTime!
  datePreviewValue: LocalDate
  description: String
  format: String
  id: Int!
  maxDate: LocalDate
  minDate: LocalDate
  name: String!
  order: Int!
  required: Boolean!
  template: Template
  type: TemplateVariableType!
  updatedAt: LocalDateTime!
}

"""A type representing a validated email address"""
scalar Email

"""Enhanced file information with metadata"""
type FileInfo implements StorageObject {
  """MIME content type"""
  contentType: String

  """Creation timestamp"""
  created: LocalDateTime!

  """File type category"""
  fileType: FileType!

  """Whether the file is publicly accessible"""
  isPublic: Boolean!

  """Last modified timestamp"""
  lastModified: LocalDateTime!

  """MD5 hash of the file"""
  md5Hash: String

  """Media link for streaming (if applicable)"""
  mediaLink: String

  """File name"""
  name: String!

  """Full path in the bucket"""
  path: String!

  """File size in bytes"""
  size: Long!

  """URL for accessing the file"""
  url: String
}

"""Result of a file operation"""
type FileOperationResult {
  """The affected file/folder (if applicable)"""
  item: StorageObject

  """Success or error message"""
  message: String!

  """Whether the operation was successful"""
  success: Boolean!
}

enum FileSortField {
  MODIFIED
  NAME
  SIZE
  TYPE
}

enum FileType {
  ARCHIVE
  AUDIO
  DOCUMENT
  IMAGE
  OTHER
  VIDEO
}

"""File type and its count"""
type FileTypeCount {
  """Number of files of this type"""
  count: Int!

  """File type"""
  type: FileType!
}

"""Folder information"""
type FolderInfo implements StorageObject {
  """Creation timestamp"""
  created: LocalDateTime!

  """Number of files in the folder"""
  fileCount: Int!

  """Number of subfolders"""
  folderCount: Int!

  """Last modified timestamp"""
  lastModified: LocalDateTime!

  """Folder name"""
  name: String!

  """Full path in the bucket"""
  path: String!

  """Total size of all files in the folder"""
  totalSize: Long!
}

enum Gender {
  Female
  Male
  Other
}

"""Input for listing files with pagination and filtering"""
input ListFilesInput {
  """Filter by file type (e.g., 'image', 'document')"""
  fileType: String

  """Number of items per page"""
  limit: Int

  """Page offset"""
  offset: Int

  """The folder path to list (empty for root)"""
  path: String!

  """Search term for file names"""
  searchTerm: String

  """Sort by field"""
  sortBy: FileSortField

  """Sort direction"""
  sortDirection: SortDirection
}

"""A type representing a formatted kotlinx.datetime.LocalDate"""
scalar LocalDate

"""A type representing a formatted kotlinx.datetime.LocalDateTime"""
scalar LocalDateTime

input LoginInput {
  email: String!
  password: String!
}

type LogoutResponse {
  message: String!
}

"""A type representing a Kotlin Long value"""
scalar Long

type Mutation {
  createDateTemplateVariable(input: CreateDateTemplateVariableInput!): DateTemplateVariable!
  createNumberTemplateVariable(input: CreateNumberTemplateVariableInput!): NumberTemplateVariable!
  createSelectTemplateVariable(input: CreateSelectTemplateVariableInput!): SelectTemplateVariable!
  createStudent(input: CreateStudentInput!): Student!
  createTemplate(input: CreateTemplateInput!): Template!
  createTemplateCategory(input: CreateTemplateCategoryInput!): TemplateCategory!
  createTextTemplateVariable(input: CreateTextTemplateVariableInput!): TextTemplateVariable!

  """Delete a single file"""
  deleteFile(path: String!): FileOperationResult!
  deleteStudent(id: Int!): Student!
  deleteTemplate(id: Int!): Template
  deleteTemplateCategory(id: Int!): TemplateCategory!
  deleteTemplateVariable(id: Int!): TemplateVariable!

  """Login user with email and password"""
  login(input: LoginInput!): AuthPayload

  """Logout current user"""
  logout: LogoutResponse!
  partialUpdateStudent(input: PartialUpdateStudentInput!): Student!

  """Register a new user"""
  register(input: RegisterInput!): AuthPayload

  """Rename a file"""
  renameFile(input: RenameFileInput!): FileOperationResult!
  suspendTemplate(id: Int!): Template
  unsuspendTemplate(id: Int!): Template
  updateDateTemplateVariable(input: UpdateDateTemplateVariableInput!): DateTemplateVariable!
  updateNumberTemplateVariable(input: UpdateNumberTemplateVariableInput!): NumberTemplateVariable!
  updateSelectTemplateVariable(input: UpdateSelectTemplateVariableInput!): SelectTemplateVariable!
  updateTemplate(input: UpdateTemplateInput!): Template
  updateTemplateCategory(input: UpdateTemplateCategoryInput!): TemplateCategory!
  updateTextTemplateVariable(input: UpdateTextTemplateVariableInput!): TextTemplateVariable!
}

type NumberTemplateVariable implements TemplateVariable {
  createdAt: LocalDateTime!
  decimalPlaces: Int
  description: String
  id: Int!
  maxValue: Float
  minValue: Float
  name: String!
  numberPreviewValue: Float
  order: Int!
  required: Boolean!
  template: Template
  type: TemplateVariableType!
  updatedAt: LocalDateTime!
}

input OrderStudentsByClauseInput {
  column: OrderStudentsByColumn!
  order: SortDirection!
}

enum OrderStudentsByColumn {
  CREATED_AT
  DATE_OF_BIRTH
  EMAIL
  GENDER
  ID
  NAME
  UPDATED_AT
}

type PaginatedStudentResponse {
  data: [Student!]!
  paginationInfo: PaginationInfo
}

type PaginatedTemplatesResponse {
  data: [Template!]!
  paginationInfo: PaginationInfo
}

input PaginationArgsInput {
  after: String
  before: String
  defaultCount: Int
  first: Int
  last: Int
  maxCount: Int
  page: Int
  skip: Int
}

type PaginationInfo {
  count: Int!
  currentPage: Int!
  firstItem: Int
  hasMorePages: Boolean!
  lastItem: Int
  lastPage: Int!
  perPage: Int!
  total: Int!
}

input PartialUpdateStudentInput {
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  id: Int!
  name: String
  nationality: CountryCode
  phoneNumber: PhoneNumber
}

"""A type representing a validated phone number"""
scalar PhoneNumber

type Query {
  getFileInfo(path: String!): FileInfo
  getFolderInfo(path: String!): FolderInfo

  """Get storage statistics"""
  getStorageStats(
    """
    Folder path to get stats for (optional, gets stats for entire bucket if not specified)
    """
    path: String
  ): StorageStats!

  """Check if user is authenticated"""
  isAuthenticated: Boolean!

  """List files and folders with pagination and filtering"""
  listFiles(input: ListFilesInput!): StorageObjectList!
  mainTemplateCategory: TemplateCategory

  """Get current authenticated user"""
  me: User
  searchFiles(
    """File type filter (optional)"""
    fileType: String

    """
    Folder to search in (optional, searches entire bucket if not specified)
    """
    folder: String

    """Maximum number of results"""
    limit: Int!
    searchTerm: String!
  ): StorageObjectList!
  student(id: Int!): Student
  students(filterArgs: StudentFilterArgsInput, orderBy: [OrderStudentsByClauseInput!], paginationArgs: PaginationArgsInput): PaginatedStudentResponse!
  suspensionTemplateCategory: TemplateCategory
  template(id: Int!): Template
  templateCategories: [TemplateCategory!]!
  templateCategory(id: Int!): TemplateCategory
  templateConfig: TemplateConfig
  templates(paginationArgs: PaginationArgsInput): PaginatedTemplatesResponse!

  """Get user by ID (authenticated users only)"""
  user(id: Int!): User

  """Get all users (admin only)"""
  users: [User!]
}

input RegisterInput {
  email: Email!
  name: String!
  password: String!
}

"""Input for renaming a file or folder"""
input RenameFileInput {
  """The current path of the file/folder"""
  currentPath: String!

  """The new name"""
  newName: String!
}

type SelectTemplateVariable implements TemplateVariable {
  createdAt: LocalDateTime!
  description: String
  id: Int!
  multiple: Boolean
  name: String!
  options: [String!]
  order: Int!
  required: Boolean!
  selectPreviewValue: String
  template: Template
  type: TemplateVariableType!
  updatedAt: LocalDateTime!
}

enum SortDirection {
  ASC
  DESC
}

interface StorageObject {
  name: String!
  path: String!
}

"""Paginated list of storage objects"""
type StorageObjectList {
  """Whether there are more items"""
  hasMore: Boolean!

  """List of files and folders"""
  items: [StorageObject!]!

  """Items per page"""
  limit: Int!

  """Current page offset"""
  offset: Int!

  """Total number of items"""
  totalCount: Int!
}

"""Storage statistics"""
type StorageStats {
  """Breakdown by file type"""
  fileTypeBreakdown: [FileTypeCount!]!

  """Total number of files"""
  totalFiles: Int!

  """Total number of folders"""
  totalFolders: Int!

  """Total size in bytes"""
  totalSize: Long!
}

type Student {
  createdAt: LocalDateTime
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  id: Int!
  name: String!
  nationality: CountryCode
  phoneNumber: PhoneNumber
  updatedAt: LocalDateTime
}

input StudentFilterArgsInput {
  birthDate: LocalDateTime
  birthDateAfter: LocalDateTime
  birthDateBefore: LocalDateTime
  birthDateFrom: LocalDateTime
  birthDateIsEmpty: Boolean
  birthDateIsNotEmpty: Boolean
  birthDateNot: LocalDateTime
  birthDateOnOrAfter: LocalDateTime
  birthDateOnOrBefore: LocalDateTime
  birthDateTo: LocalDateTime
  createdAt: LocalDateTime
  createdAtAfter: LocalDateTime
  createdAtBefore: LocalDateTime
  createdAtFrom: LocalDateTime
  createdAtIsEmpty: Boolean
  createdAtIsNotEmpty: Boolean
  createdAtNot: LocalDateTime
  createdAtOnOrAfter: LocalDateTime
  createdAtOnOrBefore: LocalDateTime
  createdAtTo: LocalDateTime
  email: String
  emailEndsWith: String
  emailEquals: Email
  emailIsEmpty: Boolean
  emailIsNotEmpty: Boolean
  emailNotContains: String
  emailNotEquals: String
  emailStartsWith: String
  gender: Gender
  name: String
  nameEndsWith: String
  nameEquals: String
  nameIsEmpty: Boolean
  nameIsNotEmpty: Boolean
  nameNotContains: String
  nameNotEquals: String
  nameStartsWith: String
  nationality: CountryCode
  phoneNumber: PhoneNumber
}

type Template {
  category: TemplateCategory!
  createdAt: LocalDateTime
  description: String
  id: Int!
  imageUrl: String!
  name: String!
  order: Int!
  preSuspensionCategory: TemplateCategory
  updatedAt: LocalDateTime
  variables: [TemplateVariable!]
}

type TemplateCategory {
  categorySpecialType: CategorySpecialType
  childCategories: [TemplateCategory!]
  createdAt: LocalDateTime
  description: String
  id: Int!
  name: String!
  order: Int
  parentCategory: TemplateCategory
  templates: [Template!]
  updatedAt: LocalDateTime
}

type TemplateConfig {
  allowedFileTypes: [String!]!
  maxBackgroundSize: Int!
}

interface TemplateVariable {
  createdAt: LocalDateTime!
  description: String
  id: Int!
  name: String!
  order: Int!
  required: Boolean!
  template: Template
  type: TemplateVariableType!
  updatedAt: LocalDateTime!
}

enum TemplateVariableType {
  DATE
  NUMBER
  SELECT
  TEXT
}

type TextTemplateVariable implements TemplateVariable {
  createdAt: LocalDateTime!
  description: String
  id: Int!
  maxLength: Int
  minLength: Int
  name: String!
  order: Int!
  pattern: String
  required: Boolean!
  template: Template
  textPreviewValue: String
  type: TemplateVariableType!
  updatedAt: LocalDateTime!
}

input UpdateDateTemplateVariableInput {
  description: String
  format: String
  id: Int!
  maxDate: LocalDate
  minDate: LocalDate
  name: String!
  previewValue: LocalDate
  required: Boolean!
}

input UpdateNumberTemplateVariableInput {
  decimalPlaces: Int
  description: String
  id: Int!
  maxValue: Float
  minValue: Float
  name: String!
  previewValue: Float
  required: Boolean!
}

input UpdateSelectTemplateVariableInput {
  description: String
  id: Int!
  multiple: Boolean!
  name: String!
  options: [String!]!
  previewValue: String
  required: Boolean!
}

input UpdateTemplateCategoryInput {
  description: String
  id: Int!
  name: String!
  parentCategoryId: Int
}

input UpdateTemplateInput {
  categoryId: Int!
  description: String
  id: Int!
  name: String
}

input UpdateTextTemplateVariableInput {
  description: String
  id: Int!
  maxLength: Int
  minLength: Int
  name: String!
  pattern: String
  previewValue: String
  required: Boolean!
}

type User {
  createdAt: LocalDateTime!
  email: Email!
  emailVerifiedAt: LocalDateTime
  id: Int!
  isAdmin: Boolean!
  name: String!
  password: String!
  rememberToken: String
  updatedAt: LocalDateTime!
}