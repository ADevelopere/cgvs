"""This directive allows results to be deferred during execution"""
directive @defer(
  """Deferred behaviour is controlled by this argument"""
  if: Boolean! = true

  """A unique label that represents the fragment being deferred"""
  label: String
) on FRAGMENT_SPREAD | INLINE_FRAGMENT

"""
This directive disables error propagation when a non nullable field returns null for the given operation.
"""
directive @experimental_disableErrorPropagation on MUTATION | QUERY | SUBSCRIPTION

type AuthPayload {
  token: String!
  user: User!
}

enum CategorySpecialType {
  Main
  Suspension
}

input CreateTemplateCategoryInput {
  description: String
  name: String!
  parentCategoryId: Int
}

input CreateTemplateInput {
  categoryId: Int!
  description: String
  name: String!
}

"""A type representing a formatted kotlinx.datetime.LocalDateTime"""
scalar LocalDateTime

input LoginInput {
  email: String!
  password: String!
}

type LogoutResponse {
  message: String!
}

type Mutation {
  createTemplate(input: CreateTemplateInput!): Template!
  createTemplateCategory(input: CreateTemplateCategoryInput!): TemplateCategory!
  deleteTemplate(id: Int!): Template

  """Login user with email and password"""
  login(input: LoginInput!): AuthPayload

  """Logout current user"""
  logout: LogoutResponse!

  """Register a new user"""
  register(input: RegisterInput!): AuthPayload
  reorderTemplate(input: ReorderTemplateInput!): Template
  suspendTemplate(id: Int!): Template
  unsuspendTemplate(id: Int!): Template
  updateTemplate(input: UpdateTemplateInput!): Template
}

type Query {
  hello: String!

  """Check if user is authenticated"""
  isAuthenticated: Boolean!

  """Get current authenticated user"""
  me: User

  """Get user by ID (authenticated users only)"""
  user(id: Int!): User

  """Get all users (admin only)"""
  users: [User!]
}

input RegisterInput {
  email: String!
  name: String!
  password: String!
}

input ReorderTemplateInput {
  id: Int!
  order: Int!
}

type Template {
  category: TemplateCategory!
  createdAt: LocalDateTime!
  description: String
  id: Int!
  imageUrl: String
  name: String!
  order: Int!
  preSuspensionCategory: TemplateCategory
  updatedAt: LocalDateTime!
}

type TemplateCategory {
  categorySpecialType: CategorySpecialType
  childCategories: [TemplateCategory!]!
  createdAt: LocalDateTime!
  description: String
  id: Int!
  name: String!
  order: Int
  parentCategory: TemplateCategory
  updatedAt: LocalDateTime!
}

input UpdateTemplateInput {
  categoryId: Int!
  description: String
  id: Int!
  name: String
}

type User {
  createdAt: LocalDateTime!
  email: String!
  emailVerifiedAt: LocalDateTime
  id: Int!
  isAdmin: Boolean!
  name: String!
  password: String!
  rememberToken: String
  updatedAt: LocalDateTime!
}