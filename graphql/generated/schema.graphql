"""This directive allows results to be deferred during execution"""
directive @defer(
  """Deferred behaviour is controlled by this argument"""
  if: Boolean! = true

  """A unique label that represents the fragment being deferred"""
  label: String
) on FRAGMENT_SPREAD | INLINE_FRAGMENT

"""
This directive disables error propagation when a non nullable field returns null for the given operation.
"""
directive @experimental_disableErrorPropagation on MUTATION | QUERY | SUBSCRIPTION

"""Enable pagination for this field with configurable options"""
directive @paginate(defaultCount: Int!, edgeType: String!, includePaginationInfo: Boolean!, maxCount: Int!, type: PaginationType!) on FIELD_DEFINITION

type AuthPayload {
  token: String!
  user: User!
}

enum CategorySpecialType {
  Main
  Suspension
}

input CreateStudentInput {
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  name: String!
  nationality: Nationality
  phoneNumber: PhoneNumber
}

input CreateTemplateCategoryInput {
  description: String
  name: String!
  parentCategoryId: Int
}

input CreateTemplateInput {
  categoryId: Int!
  description: String
  name: String!
}

"""A type representing a validated email address"""
scalar Email

enum Gender {
  Female
  Male
  Other
}

"""A type representing a formatted kotlinx.datetime.LocalDate"""
scalar LocalDate

"""A type representing a formatted kotlinx.datetime.LocalDateTime"""
scalar LocalDateTime

input LoginInput {
  email: String!
  password: String!
}

type LogoutResponse {
  message: String!
}

type Mutation {
  createStudent(input: CreateStudentInput!): Student!
  createTemplate(input: CreateTemplateInput!): Template!
  createTemplateCategory(input: CreateTemplateCategoryInput!): TemplateCategory!
  deleteStudent(id: Int!): Student!
  deleteTemplate(id: Int!): Template
  deleteTemplateCategory(id: Int!): TemplateCategory!

  """Login user with email and password"""
  login(input: LoginInput!): AuthPayload

  """Logout current user"""
  logout: LogoutResponse!

  """Register a new user"""
  register(input: RegisterInput!): AuthPayload
  suspendTemplate(id: Int!): Template
  unsuspendTemplate(id: Int!): Template
  updateStudent(input: UpdateStudentInput!): Student!
  updateTemplate(input: UpdateTemplateInput!): Template
  updateTemplateCategory(input: UpdateTemplateCategoryInput!): TemplateCategory!
}

enum Nationality {
  AD
  AE
  AF
  AG
  AI
  AL
  AM
  AO
  AQ
  AR
  AS
  AT
  AU
  AW
  AX
  AZ
  BA
  BB
  BD
  BE
  BF
  BG
  BH
  BI
  BJ
  BL
  BM
  BN
  BO
  BR
  BS
  BT
  BV
  BW
  BY
  BZ
  CA
  CC
  CD
  CF
  CG
  CH
  CI
  CK
  CL
  CM
  CN
  CO
  CR
  CU
  CV
  CW
  CX
  CY
  CZ
  DE
  DJ
  DK
  DM
  DO
  DZ
  EC
  EE
  EG
  EH
  ER
  ES
  ET
  FI
  FJ
  FK
  FM
  FO
  FR
  GA
  GB
  GD
  GE
  GF
  GG
  GH
  GI
  GL
  GM
  GN
  GP
  GQ
  GR
  GS
  GT
  GU
  GW
  GY
  HK
  HM
  HN
  HR
  HT
  HU
  ID
  IE
  IM
  IN
  IO
  IQ
  IR
  IS
  IT
  JE
  JM
  JO
  JP
  KE
  KG
  KH
  KI
  KM
  KN
  KP
  KR
  KW
  KY
  KZ
  LA
  LB
  LC
  LI
  LK
  LR
  LS
  LT
  LU
  LV
  LY
  MA
  MC
  MD
  ME
  MF
  MG
  MH
  MK
  ML
  MM
  MN
  MO
  MP
  MQ
  MR
  MS
  MT
  MU
  MV
  MW
  MX
  MY
  MZ
  NA
  NC
  NE
  NF
  NG
  NI
  NL
  NO
  NP
  NR
  NU
  NZ
  OM
  PA
  PE
  PF
  PG
  PH
  PK
  PL
  PM
  PN
  PR
  PS
  PT
  PW
  PY
  QA
  RE
  RO
  RS
  RU
  RW
  SA
  SB
  SC
  SD
  SE
  SG
  SH
  SI
  SJ
  SK
  SL
  SM
  SN
  SO
  SR
  SS
  ST
  SV
  SX
  SY
  SZ
  TC
  TD
  TF
  TG
  TH
  TJ
  TK
  TL
  TM
  TN
  TO
  TR
  TV
  TW
  TZ
  UA
  UG
  US
  UY
  UZ
  VA
  VC
  VE
  VG
  VI
  VN
  VU
  WF
  WS
  XK
  YE
  YT
  ZA
  ZM
  ZW
}

type PaginatedStudentResponse {
  data: [Student!]!
  paginationInfo: PaginationInfo
}

type PaginatedTemplatesResponse {
  data: [Template!]!
  paginationInfo: PaginationInfo
}

type PaginationInfo {
  count: Int!
  currentPage: Int!
  firstItem: Int
  hasMorePages: Boolean!
  lastItem: Int
  lastPage: Int
  perPage: Int!
  total: Int
}

enum PaginationType {
  """Cursor-based pagination compatible with Relay specification"""
  CONNECTION

  """Offset-based pagination with total count"""
  PAGINATOR

  """Simple offset-based pagination without total count"""
  SIMPLE
}

"""A type representing a validated phone number"""
scalar PhoneNumber

type Query {
  """Check if user is authenticated"""
  isAuthenticated: Boolean!
  mainTemplateCategory: TemplateCategory

  """Get current authenticated user"""
  me: User
  paginatedStudents(first: Int, page: Int, skip: Int): PaginatedStudentResponse!
  paginatedTemplates(first: Int, page: Int, skip: Int): PaginatedTemplatesResponse!
  student(id: Int!): Student
  students: [Student!]!
  suspensionTemplateCategory: TemplateCategory
  template(id: Int!): Template
  templateCategories: [TemplateCategory!]!
  templateCategory(id: Int!): TemplateCategory
  templateConfig: TemplateConfig
  templates: [Template!]!

  """Get user by ID (authenticated users only)"""
  user(id: Int!): User

  """Get all users (admin only)"""
  users: [User!]
}

input RegisterInput {
  email: Email!
  name: String!
  password: String!
}

type Student {
  createdAt: LocalDateTime!
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  id: Int!
  name: String!
  nationality: Nationality
  phoneNumber: PhoneNumber
  updatedAt: LocalDateTime!
}

type Template {
  category: TemplateCategory!
  createdAt: LocalDateTime!
  description: String
  id: Int!
  imageUrl: String
  name: String!
  order: Int!
  preSuspensionCategory: TemplateCategory
  updatedAt: LocalDateTime!
}

type TemplateCategory {
  categorySpecialType: CategorySpecialType
  childCategories: [TemplateCategory!]!
  createdAt: LocalDateTime!
  description: String
  id: Int!
  name: String!
  order: Int
  parentCategory: TemplateCategory
  templates: [Template!]!
  updatedAt: LocalDateTime!
}

type TemplateConfig {
  allowedFileTypes: [String!]!
  maxBackgroundSize: Int!
}

input UpdateStudentInput {
  dateOfBirth: LocalDate
  email: Email
  gender: Gender
  id: Int!
  name: String!
  nationality: Nationality
  phoneNumber: PhoneNumber
}

input UpdateTemplateCategoryInput {
  description: String
  id: Int!
  name: String!
  parentCategoryId: Int
}

input UpdateTemplateInput {
  categoryId: Int!
  description: String
  id: Int!
  name: String
}

type User {
  createdAt: LocalDateTime!
  email: Email!
  emailVerifiedAt: LocalDateTime
  id: Int!
  isAdmin: Boolean!
  name: String!
  password: String!
  rememberToken: String
  updatedAt: LocalDateTime!
}